/*! @source https://github.com/SaM-Solutions/FileSaver.js/blob/master/FileSaver.js */
var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=function(){return e.URL||e.webkitURL||e},o=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in o,i=function(n){var o=t.createEvent("MouseEvents");o.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(o)},a=e.webkitRequestFileSystem,s=e.requestFileSystem||a||e.mozRequestFileSystem,d=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},c="application/octet-stream",l=0,u=500,f=function(t){var o=function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()};e.chrome?o():setTimeout(o,u)},v=function(e,t,n){t=[].concat(t);for(var o=t.length;o--;){var r=e["on"+t[o]];if("function"==typeof r)try{r.call(e,n||e)}catch(i){d(i)}}},p=function(t,d){var u,p,w,m=this,y=t.type,h=!1,g=function(){v(m,"writestart progress write writeend".split(" "))},S=function(){if((h||!u)&&(u=n().createObjectURL(t)),p)p.location.href=u;else{var o=e.open(u,"_blank");void 0==o&&"undefined"!=typeof safari&&(e.location.href=u)}m.readyState=m.DONE,g(),f(u)},b=function(e){return function(){return m.readyState!==m.DONE?e.apply(this,arguments):void 0}},x={create:!0,exclusive:!1};return m.readyState=m.INIT,d||(d="download"),r?(u=n().createObjectURL(t),o.href=u,o.download=d,i(o),m.readyState=m.DONE,g(),void f(u)):(/^\s*(?:text\/(?:plain|xml)|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)&&(t=new Blob(["ï»¿",t],{type:t.type})),e.chrome&&y&&y!==c&&(w=t.slice||t.webkitSlice,t=w.call(t,0,t.size,c),h=!0),a&&"download"!==d&&(d+=".download"),(y===c||a)&&(p=e),s?(l+=t.size,void s(e.TEMPORARY,l,b(function(e){e.root.getDirectory("saved",x,b(function(e){var n=function(){e.getFile(d,x,b(function(e){e.createWriter(b(function(n){n.onwriteend=function(t){p.location.href=e.toURL(),m.readyState=m.DONE,v(m,"writeend",t),f(e)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&S()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=m["on"+e]}),n.write(t),m.abort=function(){n.abort(),m.readyState=m.DONE},m.readyState=m.WRITING}),S)}),S)};e.getFile(d,{create:!1},b(function(e){e.remove(),n()}),b(function(e){e.code===e.NOT_FOUND_ERR?n():S()}))}),S)}),S)):void S())},w=p.prototype,m=function(e,t){return new p(e,t)};return w.abort=function(){var e=this;e.readyState=e.DONE,v(e,"abort")},w.readyState=w.INIT=0,w.WRITING=1,w.DONE=2,w.error=w.onwritestart=w.onprogress=w.onwrite=w.onabort=w.onerror=w.onwriteend=null,m}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs}),String.prototype.endsWithAny=function(){for(var e=Array.prototype.slice.call(arguments),t=this.toLowerCase().toString(),n=0;n<e.length;n++)if(-1!==t.indexOf(e[n],t.length-e[n].length))return!0;return!1};var saveTextAs=saveTextAs||function(e,t,n){if(t=t||"download.txt",n=n||"utf-8",e=(e||"").replace(/\r?\n/g,"\r\n"),saveAs&&Blob){var o=new Blob([e],{type:"text/plain;charset="+n});return saveAs(o,t),!0}var r=window.frames.saveTxtWindow;if(!r&&(r=document.createElement("iframe"),r.id="saveTxtWindow",r.style.display="none",document.body.insertBefore(r,null),r=window.frames.saveTxtWindow,!r&&(r=window.open("","_temp","width=100,height=100"),!r)))return window.alert("Sorry, download file could not be created."),!1;var i=r.document;navigator.userAgent.indexOf("Windows NT 5.1")>0&&!t.endsWithAny(".htm",".html")?i.open("text/plain","replace"):i.open("text/html","replace"),i.charset=n,t.endsWithAny(".htm",".html")?(i.close(),i.body.innerHTML="\r\n"+e+"\r\n"):(t.endsWithAny(".txt")||(t+=".txt"),i.write(e),i.close());var a=i.execCommand("SaveAs",null,t);return r.close(),a};
